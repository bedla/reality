"use strict";angular.module("realityApp",["ngAnimate","ngSanitize","ngTouch"]),angular.module("realityApp").controller("MainCtrl",["Reality",function(a){var b=this;this.search=function(c){c+=", Praha",a.getInfo(c).then(function(a){console.log(a),b.info=a})},this.formatNoise=function(a){return a["db-low"]+" - "+a["db-high"]},this.formatAirQuality=function(a){var b="Very bad";return 5===a?b="Bad :(":4===a?b="Not Good !":3===a?b="Acceptable":2===a?b="Good":1===a&&(b="Very Good"),b},this.getNoiseLevelAsText=function(a){console.log(a);var b=a["db-high"];switch(!0){case b>=70:return"Very High !!!";case b>=60:return"High !!";case b>=50:return"Moderate";case b>=30:return"Low";case 30>b:return"Very Low"}}}]),angular.module("realityApp").service("Reality",["$http","$q",function(a,b){const c="AIzaSyDP6X1_N95A5pEKOyNgzWNtRK04sL12oek",d={lat:50.0663614,lng:14.4005557},e={lat:50.0814746,lng:14.4302696};var f=function(b){return a.get("https://crossorigin.me/https://maps.googleapis.com/maps/api/geocode/json?address="+encodeURI(b)+"&key="+c)},g=function(b,d,e){return a.get("https://crossorigin.me/https://maps.googleapis.com/maps/api/place/nearbysearch/json?location="+d.lat+","+d.lng+"&radius="+e+"&type="+b+"&key="+c)},h=function(b,c){return a.get("https://crossorigin.me/http://54.93.66.14:8000/api?t=1468582200&pickup="+b.lat+","+b.lng+"&dest="+c.lat+","+c.lng)},i=function(b,d){const e="Muzeum,Praha|Radlická 180/50, Praha",f="https://crossorigin.me/https://maps.googleapis.com/maps/api/distancematrix/json";var g=f+"?origins="+encodeURI(d)+"&destinations="+encodeURI(e)+"&mode="+b+"&language=cs&key="+c;return a.get(g)},j=function(b){return a.get("https://crossorigin.me/http://realreality-app.azurewebsites.net/realreality/rest/zones-count?lat="+b.lat+"&lon="+b.lng+"&dist=500")},k=function(b,c){return a.get("https://crossorigin.me/http://realreality-app.azurewebsites.net/realreality/rest/noise?lat="+b.lat+"&lon="+b.lng+"&dist=500&at-night="+c)},l=function(b){return a.get("https://crossorigin.me/http://realreality-app.azurewebsites.net/realreality/rest/atmosphere?lat="+b.lat+"&lon="+b.lng)};this.getInfo=function(a){return b(function(c){return f(a).then(function(f){var m=f.data.results[0].geometry.location;b.all({pubs:g("restaurant",m,500),nightClubs:g("night_club",m,500),stops:g("transit_station",m,400),park:g("park",m,600),school:g("school",m,1e3),liftago:h(m,d),liftagoFromMuzeumTo:h(e,m),transit:i("transit",a),driving:i("driving",a),zones:j(m,500),noiseDay:k(m,!1),noiseNight:k(m,!0),air:l(m)}).then(function(a){var b={};_.each(a,function(a,c){b[c]=a.data}),c(b)})})})}}]),angular.module("realityApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="row"> <div class="col-xs-12 text-center"> <h2> <span class="glyphicon glyphicon-home" aria-hidden="true"></span> Real Reality</h2> </div> </div> <div class="row"> <div class="col-xs-10"> <div class="input-group"> <input type="text" class="form-control input-lg" placeholder="e.g. Radlická 50" ng-model="address" aria-describedby="address"> <span class="input-group-addon" id="basic-addon2">Praha</span> </div> </div> <div class="col-xs-2"> <button class="btn btn-primary btn-lg" ng-click="main.search(address)">Hledej</button> </div> </div> <div class="info" ng-if="main.info"> <div class="row"> <h3>Public transit</h3> </div> <div class="row"> <div class="col-xs-6"> To Muzeum </div> <div class="col-xs-6 text-right"> {{main.info.transit.rows[0].elements[0].duration.text}} </div> </div> <div class="row"> <div class="col-xs-6"> To <img class="logo" src="http://node5.cz/wp-content/themes/node5/img/logo_new.svg" alt=""> </div> <div class="col-xs-6 text-right"> {{main.info.transit.rows[0].elements[1].duration.text}} </div> </div> <div class="row"> <h3>Drive Info</h3> </div> <div class="row"> <div class="col-xs-6"> <img class="logo" src="http://node5.cz/wp-content/themes/node5/img/logo_new.svg" alt=""> </div> <div class="col-xs-6 text-right"> {{main.info.driving.rows[0].elements[0].duration.text}} </div> </div> <div class="row"> <div class="col-xs-6"> Muzeum </div> <div class="col-xs-6 text-right"> {{main.info.driving.rows[0].elements[1].duration.text}} </div> </div> <div class="row"> <h3><img class="liftago" src="https://www.liftago.com/sites/default/files/logo-160x99.png" alt=""> prices</h3> </div> <div class="row"> <div class="col-xs-6"> To <img class="logo" src="http://node5.cz/wp-content/themes/node5/img/logo_new.svg" alt=""> </div> <div class="col-xs-6 text-right"> {{main.info.liftago[0].price | number : 0}} Kč<br> <small>{{main.info.driving.rows[0].elements[0].duration.text}}</small> </div> </div> <div class="row"> <div class="col-xs-6"> From Muzeum </div> <div class="col-xs-6 text-right"> {{main.info.liftagoFromMuzeumTo[0].price | number : 0}} Kč<br> <small>{{main.info.driving.rows[0].elements[1].duration.text}}</small> </div> </div> <div class="row"> <h3>Location</h3> </div> <div class="row"> <div class="col-xs-6"> Parking zones </div> <div class="col-xs-6 text-right"> @@ZONES@@ </div> </div> <div class="row"> <h3>Noise</h3> </div> <div class="row"> <div class="col-xs-6"> <span class="glyphicon glyphicon-time"></span> {{main.getNoiseLevelAsText(main.info.noiseDay)}} <br> <small>{{main.formatNoise(main.info.noiseDay)}}</small> </div> <div class="col-xs-6 text-right"> <span class="glyphicon glyphicon-bed"></span> {{main.getNoiseLevelAsText(main.info.noiseNight)}} <br> <small>{{main.formatNoise(main.info.noiseNight)}}</small> </div> </div> <div class="row"> <h3>Pollution</h3> </div> <div class="row"> <div class="col-xs-6"> Air quality </div> <div class="col-xs-6 text-right"> {{main.formatAirQuality(main.air)}} </div> </div> <div class="row"> <h3>Tags</h3> </div> <div class="row"> <div class="col-xs-12"> <span class="label label-primary" ng-if="main.info.pubs.results.length > 3" title="No beer no fun, right? Walk a little bit and choose at least from three pubs/restaurants!">PUBS</span> <span class="label label-primary" ng-if="main.info.nightClubs.results.length > 3" title="Party time! At least two clubs close to property!">PARTY</span> <span class="label label-primary" ng-if="main.info.stops.results.length > 3" title="At least three stops in close distance.">PUBLIC&nbsp;TRANSIT</span> <span class="label label-success" ng-if="main.info.parks.results.length > 0" title="Greeeeen!! At least one park in neighbourhood.">NATURE</span> <span class="label label-primary" ng-if="main.info.schools.results.length > 2" title="Lot of kids around. More than two schools in neighbourhood.">KIDS</span> </div> </div> </div>')}]);